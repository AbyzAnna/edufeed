# Data Flow Diagram

*Auto-generated by Intelligent Analyzer*

```mermaid
flowchart TD
    subgraph Users
        A[Student/Educator]
    end

    subgraph "Frontend Layer"
        B[Next.js Web App]
        C[Expo Mobile App]
    end

    subgraph "API Layer"
        D[Next.js API Routes]
        E[Auth Middleware]
    end

    subgraph "Authentication"
        F[Supabase Auth]
        G[NextAuth.js]
    end

    subgraph "AI Processing"
        H[Cloudflare Workers]
        I[OpenAI GPT-4]
        J[Replicate Models]
        K[Hugging Face]
    end

    subgraph "Data Storage"
        L[(PostgreSQL via Prisma)]
        M[(Cloudflare Vectorize)]
        N[(Cloudflare KV Cache)]
        O[(Vercel Blob / R2)]
    end

    subgraph "Background Processing"
        P[Inngest Workers]
    end

    subgraph "External Services"
        Q[SendGrid Email]
        R[Twilio SMS]
    end

    subgraph "Real-time"
        S[WebRTC Study Rooms]
    end

    A -->|HTTPS| B
    A -->|HTTPS| C
    B --> D
    C --> D
    D --> E
    E --> F
    E --> G
    F --> L
    D --> L
    D --> H
    H --> I
    H --> J
    H --> K
    H --> M
    H --> N
    D --> O
    D --> P
    P --> L
    P --> Q
    P --> R
    B --> S
    C --> S

    style A fill:#e1f5fe
    style B fill:#fff3e0
    style C fill:#fff3e0
    style D fill:#e8f5e9
    style H fill:#fce4ec
    style L fill:#f3e5f5
    style M fill:#f3e5f5
    style P fill:#fff8e1
```